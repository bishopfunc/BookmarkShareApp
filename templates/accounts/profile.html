{% extends 'base.html' %}
{% block main %}
<div class="layout-index p-3 mx-3" style="background-color: white;">

    <div class="text-center my-5">
        <h2>プロフィール</h2>
    </div>
    <table class="table">
        <tbody>
            <tr>
                <th class="header" style="width:30%">プロフィール画像</th>
                <td class="data" style="width:70%">
                    {% if user_data.image %}
                        画像あり
                        <img src='{{ user_data.image.url }}' width="100" height="100">
                    {% else %}
                        画像なし
                    {% endif %}
            </tr>
            <tr>
                <th>ユーザー名</th>
                <td>{{ user_data.username }}</td>
            </tr>
            <tr>
                <th>メール</th>
                <td>{{ user_data.email }}</td>
            </tr>
            <tr>
                <th>姓</th>
                <td>{{ user_data.last_name }}</td>
            </tr>
            <tr>
                <th>名</th>
                <td>{{ user_data.first_name }}</td>
            </tr>
        </tbody>
    </table>
    {% if request.user.username == user_data.username %}
    <div class="col text-center">
        <a class="btn btn-outline-dark mb-5" href="{% url 'accounts:profile_edit' user_data.username %}">プロフィール編集</a>
    </div>
    {% endif %}

    <div style="word-break: break-all;">
        {% if user.username in request.get_full_path %}
        <h2>公開記事一覧</h2>
        {% for post in post_data %}
        <h2>{{ post.title }}</h2>
        <h2>{{ post.discription }}</h2>
        <h2>{{ post.object_set.first.title }}</h2>
        <h2 >{{ post.object_set.first.url }}</h2>
        <h2>{{ post.object_set.first.discription }}</h2>
        {% endfor %}
        <h2>未公開記事一覧</h2>
        {% for unpub in post_unpub_data %}
        <h2>{{ unpub.title }}</h2>
        <h2>{{ unpub.discription }}</h2>
        {% endfor %}
        {% else %}
        {% for post in post_data %}
        <h2>公開記事一覧</h2>
        <h2>{{ post.title }}</h2>
        <h2>{{ post.discription }}</h2>
        <h2>{{ post.object_set.first.title }}</h2>
        <h2>{{ post.object_set.first.url }}</h2>
        <h2>{{ post.object_set.first.discription }}</h2>
        {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock %}

